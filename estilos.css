/* estilos.css — NightOwl Premium (integrado)
   - paleta NightOwl pulida
   - burbujas nuevas (entrante índigo / saliente salmón-ámbar)
   - texto/meta coherente con el tema
   - file-card (archivos como tarjetas, thumbs adaptativos)
   - typing wave, streaming/text wrapping
   - textarea (enter = newline, autosize friendly)
   - responsive / accesibilidad
*/

/* === Variables (paleta consolidada) === */
:root{
  --bg-0: #020617;
  --bg-1: #071226;
  --panel-glass: rgba(255,255,255,0.03);

  /* acentos */
  --accent: #25d0b3;      /* acento principal (turquesa/verde) */
  --accent-2: #8bd5ff;    /* acento secundario (azul claro para clip) */
  --lavender: #7c5cff;

  /* burbujas */
  --bubble-in-bg: linear-gradient(180deg,#08306f,#0b5bb0); /* índigo profundo */
  --bubble-out-bg: linear-gradient(180deg,#ffd7b3,#ffb78a); /* salmón / ámbar suave */

  --bubble-in-text: #eef7ff;  /* claro con tinte azul */
  --bubble-out-text: #1b2b28; /* oscuro legible sobre salmón */

  /* textos UI */
  --text: #e6eef6;
  --text-muted: #94a3b8;
  --meta-color: #9bb0c8; /* timestamp / meta */

  --glass-border: rgba(255,255,255,0.04);

  --radius-lg: 14px;
  --radius-sm: 10px;
  --shadow-soft: 0 10px 40px rgba(0,0,0,0.6);
  --shadow-pop: 0 8px 26px rgba(2,8,20,0.6);

  --focus: 0 0 0 4px rgba(37,208,179,0.12);
}

/* === Base / layout === */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: Inter, "Segoe UI", Roboto, system-ui, -apple-system, "Helvetica Neue", Arial;
  background:
    radial-gradient(900px 500px at 10% 6%, rgba(124,92,255,0.04), transparent 8%),
    linear-gradient(180deg, var(--bg-0), #001224 1600px);
  color:var(--text);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

/* container */
.page{ max-width:980px; margin:28px auto; padding:18px; }

/* header */
.top{ text-align:center; margin-bottom:12px; }
.site-title{margin:0;font-size:28px;font-weight:700;color:#39ff14;text-shadow:0 0 6px rgba(57,255,20,.6),0 0 14px rgba(57,255,20,.45),0 0 28px rgba(42,255,0,.35);}
.site-desc{ margin:8px 0 0; color:var(--text-muted); font-size:14px; }

/* divider */
.divider{ border:0; height:1px; margin-top:12px; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.02), transparent); }

/* chat card */
.chat-wrapper{
  border-radius:var(--radius-lg);
  padding:16px;
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  box-shadow: var(--shadow-soft);
  backdrop-filter: blur(6px) saturate(1.05);
  border:1px solid var(--glass-border);
  display:flex;
  flex-direction:column;
  gap:12px;
}

/* controls */
.controls{ display:flex; gap:12px; align-items:center; justify-content:space-between; flex-wrap:wrap; }
.controls .left{ display:flex; align-items:center; gap:10px; font-weight:700; color:var(--text); }
#myId{ padding:6px 10px; background: rgba(255,255,255,0.02); border-radius:10px; font-weight:700; letter-spacing:1px; border:1px solid rgba(255,255,255,0.03); }

/* right controls */
.controls .right{ display:flex; align-items:center; gap:10px; flex-wrap:wrap; }
.controls label{ color:var(--text-muted); font-weight:600; font-size:14px; }
.controls input{ padding:10px 12px; border-radius:10px; border: 1px solid rgba(255,255,255,0.04); background: rgba(255,255,255,0.015); color:var(--text); width:150px; font-weight:600; outline:none; transition:box-shadow .12s, transform .12s; }
.controls input:focus{ box-shadow: var(--focus); transform: translateY(-1px); }

/* buttons */
.btn{ padding:8px 14px; border-radius:10px; border:0; cursor:pointer; font-weight:700; font-size:14px; transition: transform .12s, box-shadow .12s; }
.btn.primary{ background: linear-gradient(180deg,var(--accent), #10ad92); color:#021915; box-shadow: 0 10px 24px rgba(16,173,146,0.12); }
.btn.ghost{ background:transparent; border:1px solid rgba(255,255,255,0.03); color:var(--text); }

/* clip icon (visible con currentColor) */
.btn-icon{ background: transparent; border:0; padding:8px; border-radius:8px; cursor:pointer; color:var(--accent-2); display:inline-grid; place-items:center; transition: transform .12s, opacity .12s; }
.btn-icon:hover{ transform: translateY(-3px); opacity:0.95; }
.btn-icon svg{ width:22px; height:22px; }

/* messages area */
.messages-area{
  background: linear-gradient(180deg, rgba(7,18,28,0.72), rgba(2,10,18,0.7));
  border-radius: calc(var(--radius-lg)-2px);
  padding:22px;
  position:relative;
  overflow:auto;
  min-height:520px;
  border:1px solid rgba(255,255,255,0.02);
  box-shadow:var(--shadow-pop);
}
.messages{ display:flex; flex-direction:column; gap:16px; }

/* message base */
.message{
  max-width:76%;
  padding:14px 16px;
  border-radius:14px;
  font-size:15.5px;
  line-height:1.28;
  color:var(--text);
  transition: transform .12s cubic-bezier(.2,.9,.2,1), box-shadow .12s;
  position:relative;
  word-break: break-word;
}

/* incoming */
.message.in{
  align-self:flex-start;
  background: var(--bubble-in-bg);
  color: var(--bubble-in-text);
  border: 1px solid rgba(12,80,160,0.12);
  box-shadow: 0 6px 22px rgba(5,30,55,0.5);
  border-bottom-left-radius:6px;
}

/* outgoing */
.message.out{
  align-self:flex-end;
  background: var(--bubble-out-bg);
  color: var(--bubble-out-text);
  border: 1px solid rgba(255,200,160,0.08);
  box-shadow: 0 6px 22px rgba(5,30,35,0.45);
  border-bottom-right-radius:6px;
}

/* ensure message-body and streaming text wrap properly */
.message .message-body,
.stream-text {
  white-space: pre-wrap;    /* conserva saltos y permite wrap */
  word-break: break-word;
  overflow-wrap: anywhere;
  color: inherit;
  font-size:15.5px;
  line-height:1.28;
}

/* message meta (timestamp / status) */
.message small{ display:block; color:var(--meta-color); font-size:12px; margin-top:8px; opacity:0.95; }

/* media inside messages */
.message img{ display:block; border-radius:10px; max-width:420px; width:100%; height:auto; object-fit:cover; }

/* hover pop */
.message:hover{ transform: translateY(-4px); box-shadow: 0 14px 34px rgba(2,8,20,0.48); }

/* subtle tail */
.message.in::after,
.message.out::after{
  content:"";
  position:absolute; width:14px; height:14px; bottom:0;
  transform: translateY(50%) rotate(45deg); z-index:0;
  filter: blur(.2px);
}
.message.in::after{ left:-6px; background: rgba(255,255,255,0.02); }
.message.out::after{ right:-6px; background: rgba(255,255,255,0.02); }

/* === FILE CARD: archivos como tarjetas, no dentro de burbuja === */
.file-card {
  display:flex;
  align-items:center;
  gap:12px;
  background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.008));
  border-radius:12px;
  padding:10px 12px;
  border:1px solid rgba(255,255,255,0.03);
  box-shadow: 0 8px 22px rgba(0,0,0,0.5);
  max-width: 76%;
}

/* alignment */
.file-card.in { align-self:flex-start; }
.file-card.out { align-self:flex-end; }

/* icon placeholder */
.file-card .file-icon{
  width:56px; height:56px; min-width:56px; border-radius:8px;
  display:grid; place-items:center;
  background: linear-gradient(180deg, rgba(11,102,195,0.14), rgba(11,102,195,0.06));
  border:1px solid rgba(255,255,255,0.02);
  color: var(--accent-2);
  font-weight:700;
}

/* metadata */
.file-card .file-meta{ display:flex; flex-direction:column; gap:6px; min-width:0; }
.file-card .file-name{ font-weight:700; color:var(--bubble-in-text); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.file-card .file-size{ font-size:13px; color:var(--meta-color); }

/* image preview */
.file-card .file-thumb{
  max-width:220px;
  max-height:160px;
  border-radius:8px;
  object-fit:cover;
  box-shadow: 0 8px 20px rgba(0,0,0,0.5);
  cursor:pointer;
}

/* compatibility: if JS marks message.file, convert to card visually */
.message.file { padding:0; border-radius:12px; background:transparent; border:0; box-shadow:none; }
.message.file > * { margin:0; }
.message.file .file-card { margin:0; }

/* Typing indicator */
.typing{
  position:absolute;
  bottom:108px;
  left:36px;
  padding:8px 12px;
  border-radius:20px;
  border:1px solid rgba(255,255,255,0.03);
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  box-shadow: 0 8px 22px rgba(0,0,0,0.55);
}
.dots{ display:flex; gap:7px; align-items:center; justify-content:center; }
.dots span{ width:8px; height:8px; border-radius:50%; background: rgba(255,255,255,0.14); transform-origin:center; animation: wave 1s infinite ease-in-out; }
.dots span:nth-child(2){ animation-delay: .12s; } .dots span:nth-child(3){ animation-delay: .24s; }
@keyframes wave{
  0%{ transform: translateY(0) scale(1); opacity:.6 }
  30%{ transform: translateY(-6px) scale(1.15); opacity:1 }
  60%{ transform: translateY(0) scale(1); opacity:.75 }
  100%{ transform: translateY(0) scale(1); opacity:.6 }
}

/* composer (textarea) */
.composer{ display:flex; gap:12px; align-items:center; padding:12px; background: linear-gradient(90deg, rgba(255,255,255,0.01), rgba(255,255,255,0.006)); border-radius:12px; border:1px solid rgba(255,255,255,0.02); }
.message-input{
  flex:1;
  padding:12px 14px;
  border-radius:12px;
  border:1px solid rgba(255,255,255,0.04);
  background: rgba(255,255,255,0.015);
  color:var(--text);
  font-size:15.5px;
  outline:none;
  transition: box-shadow .12s;
  resize: none;
  min-height:44px;
  max-height:40vh;
  overflow:auto;
  line-height:1.4;
}
.message-input:focus{ box-shadow: var(--focus); transform: translateY(-2px); }
.message-input::placeholder { color: rgba(255,255,255,0.28); }

/* send & icons */
.btn-send{ width:56px; height:56px; border-radius:12px; display:grid; place-items:center; cursor:pointer; background: linear-gradient(180deg,var(--accent), #10ad92); color:#02221a; box-shadow: 0 12px 26px rgba(16,173,146,0.12); }

/* responsive */
@media (max-width:820px){
  .page{ padding:12px; }
  .controls{ flex-direction:column; align-items:flex-start; gap:10px; }
  .controls .right{ width:100%; display:flex; gap:8px; justify-content:space-between; }
  .messages-area{ min-height:60vh; padding:14px; }
  .message{ max-width:88%; font-size:15px; }
  .typing{ bottom:96px; left:18px; }
  .btn-send{ width:48px; height:48px; }
  .btn-icon{ width:40px; height:40px; }
  .file-card { max-width: 92%; padding:10px; gap:10px; }
  .file-card .file-icon{ width:48px; height:48px; min-width:48px; }
  .file-card .file-thumb{ max-width:160px; max-height:120px; }
}

/* accessibility focus */
button:focus, input:focus, .message-input:focus, .btn-icon:focus { outline:none; box-shadow: var(--focus); border-color: rgba(37,208,179,0.12); }

/* utilities */
.hidden{ display:none !important; }
.center{ display:flex; align-items:center; justify-content:center; }

